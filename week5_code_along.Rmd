---
title: "Week 5 - Code Along Lab"
author: "Hannah Brady"
date: "11/8/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(palmerpenguins)
library(effsize)
library(broom)
library(ggbeeswarm)
library(car)
```

# Penguins size comparisons

Installed a bunch of packages in the console.

## Part 1. T-tests

Do we have enough evidence to think these are drawn from populations with separate means?

Mass comparison: male & female chinstrap penguins

In console: >View(penguins)

Explore data first

```{r}
chinstraps <- penguins %>% 
  filter(species == "Chinstrap")

## Histograms

ggplot(data = chinstraps, aes(x = body_mass_g)) +
  geom_histogram(bins = 10) +
  facet_wrap(~sex)

# Interpretation:
# Somewhat bell-shaped, means mean is an appropriate central tendency to evaluate.
# Somewhat symmetric so relatively normal distribution
# Male central tendency seems higher than female.

## QQ plot

ggplot(data = chinstraps, aes(sample = body_mass_g)) +
  geom_qq()+
  facet_wrap(~sex)

# A QQ plot plots the sample against a theoretically normally distributed sample, that's why linear = normally distributed
# Ran together before facet wrap and they looked normal already. But want to explore within groups so facet wrap.
# These are as close to normally distributed as you can hope real world data gets.

## Get descriptive statistics

chinstraps %>% 
  group_by(sex) %>% 
  summarise(
    mean_mass = mean(body_mass_g),
    median_mass = median(body_mass_g),
    sd_mass = sd(body_mass_g),
    sample_size = n()
  )

# Table not stored but output in RMD knitted file
# Means a bit different, median similar (normality tells us this would be the case)
# Same sample size, similar std devs.
# More important than the p-value!
```


Get vectors of body_mass_g for female and male chinstrap penguins separately.

```{r}
chinstraps_f <- chinstraps %>% 
  filter(sex == "female") %>% 
  pull(body_mass_g)

chinstraps_m <- chinstraps %>% 
  filter(sex == "male") %>% 
  pull(body_mass_g)
```

### T-tests, a couple different ways

1. Is there a significant difference in body mass between make and female chinstrap penguins.

This is a two-sided question. Not is one larger than the other, but in both directions.

```{r}
chinstrap_ttest <- t.test(chinstraps_f, chinstraps_m)
chinstrap_ttest

cohen.d(chinstraps_f, chinstraps_m)
```

t value is how different from zero the means are, df is "degrees of freedom" dependent on sample size.

p-value is tiny! Suficient evidence to reject null hypothesis that two samples drawn from populations with same mean.
We conclude that there is a signficant difference between male and female body mass. But need to discuss actual difference. Also effect size!

Magnitude of effect size is -1.26. This is large. Means large diff between groups' means.

Broom function: see the key downloaded from Gauchospace to get outputs from t-test in a nice data frame so you can call the results easily as you type up results.

Are male chinstrap penguins significantly larger (body mass) than female chinstrap penguins?

This is a one-sided question. "What are the chances I would get means this different and larger?"

```{r}
t.test(chinstraps_m, chinstraps_f, alternative = "greater")
# Is male mass greater than female? So put male then female then greater.
```
























